<!DOCTYPE html>
<html>
<head>
    <title>Test SMILES Rendering</title>
    <script src="https://unpkg.com/smiles-drawer@2.0.1/dist/smiles-drawer.min.js"></script>
</head>
<body>
    <h2>Testing SMILES Rendering</h2>
    <div id="results"></div>
    
    <script>
        const testSmiles = [
            { code: 'CH2O', smiles: 'C=O', name: 'Formaldehyde' },
            { code: 'NH1001', smiles: 'C[O-][N+](=O)=OOO', name: 'Nitrate compound' },
            { code: 'HO', smiles: 'HO', name: 'Hydroxyl' },
            { code: 'NO3', smiles: 'O[N+](=O)[O-]', name: 'Nitrate' }
        ];
        
        const drawer = new SmilesDrawer.Drawer({ 
            width: 200, 
            height: 150, 
            compactDrawing: true 
        });
        
        const resultsDiv = document.getElementById('results');
        
        testSmiles.forEach(item => {
            const container = document.createElement('div');
            container.style.display = 'inline-block';
            container.style.margin = '10px';
            container.style.border = '1px solid #ccc';
            container.style.padding = '10px';
            
            const title = document.createElement('h4');
            title.textContent = `${item.code}: ${item.name}`;
            container.appendChild(title);
            
            const code = document.createElement('p');
            code.textContent = `SMILES: ${item.smiles}`;
            code.style.fontFamily = 'monospace';
            code.style.fontSize = '12px';
            container.appendChild(code);
            
            const canvas = document.createElement('canvas');
            canvas.width = 200;
            canvas.height = 150;
            container.appendChild(canvas);
            
            try {
                SmilesDrawer.parse(item.smiles, (tree) => {
                    drawer.draw(tree, canvas, 'light', false);
                    const status = document.createElement('p');
                    status.textContent = '✓ Success';
                    status.style.color = 'green';
                    container.appendChild(status);
                }, (err) => {
                    const status = document.createElement('p');
                    status.textContent = '✗ Parse error: ' + err;
                    status.style.color = 'red';
                    container.appendChild(status);
                });
            } catch (e) {
                const status = document.createElement('p');
                status.textContent = '✗ Error: ' + e.message;
                status.style.color = 'red';
                container.appendChild(status);
            }
            
            resultsDiv.appendChild(container);
        });
    </script>
</body>
</html>
